(this["webpackJsonpthe-blog"]=this["webpackJsonpthe-blog"]||[]).push([[0],{31:function(e,t,a){e.exports=a(48)},36:function(e,t,a){},37:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(29),s=a.n(i),o=(a(36),a(37),a(11)),l=a(12),c=a(14),d=a(13),m=a(8),h=a(6),u=a(7),E=a(51),p=a(49),v=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={error:void 0,articles:void 0,showArticle:void 0,id:void 0,username:e.location.state?e.location.state.username:void 0,password:e.location.state?e.location.state.password:void 0,redirect:void 0},a.writeNewArticle=a.writeNewArticle.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"delete",value:function(e){var t=this;if(void 0!==this.state.username&&void 0!==this.state.password){var n="https://boiling-peak-38811.herokuapp.com";void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/React-blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL&&(n=Object({NODE_ENV:"production",PUBLIC_URL:"/React-blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL.trim());var r=n+"/articles/"+e+".json",i=a(20),s=this.state.username,o=this.state.password,l="Basic "+i.encode(s+":"+o);fetch(r,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:l}}).then((function(a){var n=t.state.articles.slice().filter((function(t){return t.id!==e}));t.setState({articles:n})}))}else this.setState({redirect:"/login"})}},{key:"editArticle",value:function(e){this.state.username&&this.state.password?this.setState({redirect:"/edit-article/"+e,redirectState:{username:this.state.username,password:this.state.password}}):this.setState({redirect:"/login",redirectState:{redirectUrl:"/edit-article/"+e}})}},{key:"writeNewArticle",value:function(){this.state.username&&this.state.password?this.setState({redirect:"/new-article",redirectState:{username:this.state.username,password:this.state.password}}):this.setState({redirect:"/login",redirectState:{redirectUrl:"/new-article"}})}},{key:"componentDidMount",value:function(){var e=this,t="https://boiling-peak-38811.herokuapp.com";void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/React-blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL&&(t=Object({NODE_ENV:"production",PUBLIC_URL:"/React-blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL.trim()),fetch(t+"/articles.json").then((function(e){return e.json()})).then((function(t){e.setState({articles:t})}),(function(t){e.setState({error:t.message})}))}},{key:"render",value:function(){var e=this;return this.state.error?r.a.createElement("div",null,"an error occured: ",this.state.error):void 0===this.state.articles?r.a.createElement("div",{className:"loading"},r.a.createElement(p.a,{animation:"border"}),r.a.createElement("div",null,"loading articles...")):this.state.redirect?r.a.createElement(h.a,{to:{pathname:this.state.redirect,state:this.state.redirectState}}):r.a.createElement("div",{className:"homePageWrap"},r.a.createElement("h1",{className:"headingHomePage"},"Posted Articles"),r.a.createElement("div",{className:"listWrap"},r.a.createElement("ul",{className:"list"},this.state.articles.map((function(t,a){return r.a.createElement("li",{key:a,className:"listItem"},r.a.createElement("span",{className:"itemTitle"},t.title," "),r.a.createElement("span",{className:"buttonsWrap"},r.a.createElement("span",{className:"linkInWrap"},r.a.createElement("button",{className:"buttonInWrap"},r.a.createElement(m.b,{to:"/show-article/"+t.id},"show"))),r.a.createElement("span",{className:"linkInWrap"},r.a.createElement("button",{className:"buttonInWrap",onClick:function(){return e.editArticle(t.id)}},"edit")),r.a.createElement("span",{className:"linkInWrap"},r.a.createElement("button",{className:"buttonInWrap",onClick:function(){e.delete(t.id)}},"delete"))),r.a.createElement("hr",{className:"line"}))})))),r.a.createElement("div",{className:"linkHomePage"},r.a.createElement(E.a,{variant:"outline-success",className:"buttonHomePage",onClick:this.writeNewArticle},"Write new article")))}}]),n}(n.Component),_=a(50),T=a(17),O=a(18),S=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={title:"",text:"",id:void 0,errorMessage:"",username:e.location.state?e.location.state.username:void 0,password:e.location.state?e.location.state.password:void 0},a.handleChangeTitle=a.handleChangeTitle.bind(Object(u.a)(a)),a.handleChangeText=a.handleChangeText.bind(Object(u.a)(a)),a.postArticle=a.postArticle.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"handleChangeTitle",value:function(e){this.setState({title:e.target.value})}},{key:"handleChangeText",value:function(e){this.setState({text:e.target.value})}},{key:"postArticle",value:function(){var e=this;if(""!==this.state.title&&""!==this.state.text){var t="https://boiling-peak-38811.herokuapp.com";void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/React-blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL&&(t=Object({NODE_ENV:"production",PUBLIC_URL:"/React-blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL.trim());var n=t+"/articles.json",r={article:{title:this.state.title,text:this.state.text}},i=a(20),s=this.state.username,o=this.state.password,l="Basic "+i.encode(s+":"+o);fetch(n,{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:l}}).then((function(e){return e.json()})).then((function(t){e.setState({id:t.id})}))}else this.setState({errorMessage:"Please fill out the text fields!"})}},{key:"render",value:function(){return void 0!==this.state.id?r.a.createElement(h.a,{to:"/show-article/"+this.state.id}):void 0===this.state.username?r.a.createElement(h.a,{to:{pathname:"/login",state:{redirectUrl:"/new-article"}}}):r.a.createElement("div",{className:"articleNewPageWrap"},r.a.createElement("div",null,r.a.createElement(m.b,{to:"/"},r.a.createElement("i",{className:"back"},r.a.createElement(T.a,{icon:O.a})))),r.a.createElement("h1",{className:"heading"},"New article"),r.a.createElement("div",{className:"newArticleWrap"},r.a.createElement("div",{className:"errorMessage"},this.state.errorMessage),r.a.createElement(_.a,{className:"form"},r.a.createElement(_.a.Group,{controlId:"exampleForm.ControlInput1",className:"formTopMargin"},r.a.createElement(_.a.Label,{className:"inputTitle"}," Title:"),r.a.createElement(_.a.Control,{className:"editInputTitle",type:"text",placeholder:"title",value:this.state.title,onChange:this.handleChangeTitle})),r.a.createElement(_.a.Group,{controlId:"exampleForm.ControlTextarea1",className:"textWrap"},r.a.createElement(_.a.Label,{className:"inputText"},"Text:"),r.a.createElement(_.a.Control,{className:"editInputText",as:"textarea",rows:"7",value:this.state.text,onChange:this.handleChangeText,placeholder:"text"})),r.a.createElement(E.a,{variant:"outline-success",className:"saveButtonCreate",onClick:this.postArticle},"Create article"))))}}]),n}(n.Component),C=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={error:void 0,article:void 0,id:e.id},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t="https://boiling-peak-38811.herokuapp.com";void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/React-blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL&&(t=Object({NODE_ENV:"production",PUBLIC_URL:"/React-blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL.trim());var a=t+"/articles/"+this.state.id+".json";fetch(a).then((function(e){return e.json()})).then((function(t){e.setState({article:t})}),(function(t){e.setState({error:t.message})}))}},{key:"render",value:function(){return this.state.error?r.a.createElement("div",null,"an error occured: ",this.state.error):void 0===this.state.article?r.a.createElement("div",{className:"loading"},r.a.createElement(p.a,{animation:"border"}),r.a.createElement("div",null,"loading article...")):r.a.createElement("div",null,r.a.createElement("div",{className:"homePageWrap"},r.a.createElement("span",null,r.a.createElement(m.b,{to:"/"},r.a.createElement("i",{className:"back"},r.a.createElement(T.a,{icon:O.a})))),r.a.createElement("h1",{className:"heading"},this.state.article.title),r.a.createElement("div",{className:"articleShow"},this.state.article.text.split("\n").map((function(e,t){return r.a.createElement("p",{key:t},e)})))))}}]),a}(n.Component),b=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={article:void 0,id:e.id,showArticle:!1,errorMessage:"",username:e.location.state?e.location.state.username:void 0,password:e.location.state?e.location.state.password:void 0},a.handleChangeTitle=a.handleChangeTitle.bind(Object(u.a)(a)),a.handleChangeText=a.handleChangeText.bind(Object(u.a)(a)),a.postArticle=a.postArticle.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"handleChangeTitle",value:function(e){var t=this.state.article;t.title=e.target.value,this.setState({article:t})}},{key:"handleChangeText",value:function(e){var t=this.state.article;t.text=e.target.value,this.setState({article:t})}},{key:"postArticle",value:function(){var e=this;if(""!==this.state.article.title&&""!==this.state.article.text){var t="https://boiling-peak-38811.herokuapp.com";void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/React-blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL&&(t=Object({NODE_ENV:"production",PUBLIC_URL:"/React-blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL.trim());var n=t+"/articles/"+this.state.id+".json",r={article:this.state.article},i=a(20),s=this.state.username,o=this.state.password,l="Basic "+i.encode(s+":"+o);fetch(n,{method:"PATCH",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:l}}).then((function(e){return e.json()})).then((function(t){e.setState({showArticle:!0})}))}else this.setState({errorMessage:"Please fill out the text fields!"})}},{key:"componentDidMount",value:function(){var e=this;if(void 0!==this.state.username){var t="https://boiling-peak-38811.herokuapp.com";void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/React-blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL&&(t=Object({NODE_ENV:"production",PUBLIC_URL:"/React-blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL.trim());var a=t+"/articles/"+this.state.id+".json";fetch(a).then((function(e){return e.json()})).then((function(t){e.setState({article:t})}),(function(t){e.setState({error:t.message})}))}}},{key:"render",value:function(){return void 0===this.state.username?r.a.createElement(h.a,{to:{pathname:"/login",state:{redirectUrl:"/edit-article/"+this.state.id}}}):this.state.showArticle?r.a.createElement(h.a,{to:"/show-article/"+this.state.id}):this.state.error?r.a.createElement("div",null,"an error occured: ",this.state.error):void 0===this.state.article?r.a.createElement("div",{className:"loading"},r.a.createElement(p.a,{animation:"border"}),r.a.createElement("div",null,"loading article...")):r.a.createElement("div",{className:"articleNewPageWrap"},r.a.createElement("div",null,r.a.createElement(m.b,{to:"/"},r.a.createElement("i",{className:"back"},r.a.createElement(T.a,{icon:O.a})))),r.a.createElement("h1",{className:"heading"},"Edit article"),r.a.createElement("div",{className:"newArticleWrap"},r.a.createElement("div",{className:"errorMessage"},this.state.errorMessage),r.a.createElement(_.a,{className:"form"},r.a.createElement(_.a.Group,{controlId:"exampleForm.ControlInput1",className:"formTopMargin"},r.a.createElement(_.a.Label,{className:"inputTitle"}," Title:"),r.a.createElement(_.a.Control,{className:"editInputTitle",type:"text",placeholder:"title",value:this.state.article.title,onChange:this.handleChangeTitle})),r.a.createElement(_.a.Group,{controlId:"exampleForm.ControlTextarea1",className:"textWrap"},r.a.createElement(_.a.Label,{className:"inputText"},"Text:"),r.a.createElement(_.a.Control,{className:"editInputText",as:"textarea",rows:"7",value:this.state.article.text,onChange:this.handleChangeText,placeholder:"text"})),r.a.createElement(E.a,{variant:"outline-success",className:"saveButtonEdit",onClick:this.postArticle},"Save article")),r.a.createElement("div",{className:"postButton"})))}}]),n}(n.Component),g=function(e){Object(c.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={username:"",password:"",redirect:void 0,redirectUrl:e.location.state?e.location.state.redirectUrl:"/",error:""},a.handleChangeUsername=a.handleChangeUsername.bind(Object(u.a)(a)),a.handleChangePassword=a.handleChangePassword.bind(Object(u.a)(a)),a.logIn=a.logIn.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"handleChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"logIn",value:function(){var e=this,t="https://boiling-peak-38811.herokuapp.com";void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/React-blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL&&(t=Object({NODE_ENV:"production",PUBLIC_URL:"/React-blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL.trim());var n=t+"/articles/new",r=a(20),i=this.state.username,s=this.state.password,o="Basic "+r.encode(i+":"+s);fetch(n,{headers:{Authorization:o}}).then((function(t){401===t.status?e.setState({error:"username and or password are wrong please try again"}):e.setState({redirect:!0})}),(function(t){e.setState({error:t.message})}))}},{key:"render",value:function(){return this.state.redirect?r.a.createElement(h.a,{to:{pathname:this.state.redirectUrl,state:{username:this.state.username,password:this.state.password}}}):r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(m.b,{to:"/"},r.a.createElement("i",{className:"back"},r.a.createElement(T.a,{icon:O.a})))),r.a.createElement("div",{className:"newArticleWrap"},r.a.createElement("div",null,this.state.error),r.a.createElement(_.a,{className:"form"},r.a.createElement(_.a.Group,{controlId:"exampleForm.ControlInput1",className:"formTopMargin"},r.a.createElement(_.a.Label,{className:"inputTitle"}," Username:"),r.a.createElement(_.a.Control,{className:"editInputTitle",type:"text",placeholder:"Username",value:this.state.username,onChange:this.handleChangeUsername})),r.a.createElement(_.a.Group,{controlId:"exampleForm.ControlTextarea1",className:"textWrap"},r.a.createElement(_.a.Label,{className:"inputText"},"Password:"),r.a.createElement(_.a.Control,{className:"editInputText",type:"password",value:this.state.password,onChange:this.handleChangePassword,placeholder:"Password"})),r.a.createElement(E.a,{variant:"outline-success",className:"saveButtonCreate",onClick:this.logIn},r.a.createElement("div",{className:"centerTextButton"},"Log in")))))}}]),n}(n.Component),P=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(m.a,null,r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/",exact:!0,component:v}),r.a.createElement(h.b,{path:"/new-article",exact:!0,component:S}),r.a.createElement(h.b,{path:"/show-article/:id",render:function(e){return r.a.createElement(C,Object.assign({},e,{id:e.match.params.id}))}}),r.a.createElement(h.b,{path:"/edit-article/:id",render:function(e){return r.a.createElement(b,Object.assign({},e,{id:e.match.params.id}))}}),r.a.createElement(h.b,{path:"/login",exact:!0,component:g}))))}}]),a}(n.Component);a(47);var N=function(){return r.a.createElement("div",{className:"appWrap"},r.a.createElement(P,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.900ae3e6.chunk.js.map